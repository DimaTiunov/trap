import{I as H,h as N,_ as j}from"./layout-sidebar.vue.39468dad.js";import{d as A,x as F,o as a,h as r,a as t,s as P,i as s,u as e,A as V,F as b,r as T,t as c,j as m,g as k,f as v,w as d,c as u,p as L,e as M,k as Y,l as O,m as U,R as z,n as x}from"./entry.6dfe3f3c.js";import{u as q}from"./fetch.34eddd7f.js";import{P as w,W}from"./vue3-tabs-component.647caf6a.js";import{a as G,T as y}from"./table-base.20858ff1.js";import{C as B}from"./code-snippet.3ed68de1.js";import{F as J}from"./file-attachment.d021c631.js";import{_ as E}from"./_plugin-vue_export-helper.c27b6911.js";import{P as K}from"./page-header.c190c3eb.js";import{u as Q}from"./use-smtp.5c332337.js";import"./use-formats.c79ce0bd.js";const X={class:"smtp-page-preview"},Z={class:"smtp-page-preview__in"},ee={class:"smtp-page-preview__device-in"},te=A({__name:"smtp-page-preview",props:{device:{default:"desktop"}},setup(o){const p=F(o.device);return(_,i)=>(a(),r("div",X,[t("div",Z,[t("button",{class:P(["smtp-page-preview__btn",{"smtp-page-preview__btn--active":p.value==="mobile"}]),onClick:i[0]||(i[0]=h=>p.value="mobile")},[s(e(H),{class:"smtp-page-preview__btn-icon",name:"mobile-device"})],2),t("button",{class:P(["smtp-page-preview__btn",{"smtp-page-preview__btn--active":p.value==="tablet"}]),onClick:i[1]||(i[1]=h=>p.value="tablet")},[s(e(H),{class:"smtp-page-preview__btn-icon",name:"tablet-device"})],2),t("button",{class:P(["smtp-page-preview__btn",{"smtp-page-preview__btn--active":p.value==="desktop"}]),onClick:i[2]||(i[2]=h=>p.value="desktop")},[s(e(H),{class:"smtp-page-preview__btn-icon",name:"desktop-device"})],2)]),t("div",{class:P(["smtp-page-preview__device",{"smtp-page-preview__device--desktop":p.value==="desktop","smtp-page-preview__device--tablet":p.value==="tablet","smtp-page-preview__device--mobile":p.value==="mobile"}])},[t("div",ee,[V(_.$slots,"default")])],2)]))}});const se={class:"smtp-page-addresses"},ae={key:0,class:"smtp-page-addresses__item-name"},ne=A({__name:"smtp-page-addresses",props:{addresses:{}},setup(o){return(n,p)=>(a(),r("div",se,[(a(!0),r(b,null,T(n.addresses,_=>(a(),r("div",{key:_.email,class:"smtp-page-addresses__item"},[_.name?(a(),r("span",ae,c(_.name),1)):m("",!0),t("span",null,c(_.email),1)]))),128))]))}});const I=E(ne,[["__scopeId","data-v-7de98a53"]]),oe=o=>(L("data-v-65889f74"),o=o(),M(),o),le={ref:"main",class:"smtp-page"},de={class:"smtp-page__main"},pe={class:"smtp-page__header"},re={class:"smtp-page__header-title"},_e={class:"smtp-page__header-meta"},ie={class:"smtp-page__header-date"},ce={class:"smtp-page__sender"},me={class:"smtp-page__sender-title"},ue={class:"smtp-page__sender-address"},ve={class:"smtp-page__body"},he=["innerHTML"],ge={class:"mb-5"},fe={class:"flex gap-x-3"},ye=oe(()=>t("h3",{class:"mb-3 font-bold"},"Email Headers",-1)),be=A({__name:"smtp-page",props:{event:{},htmlSource:{}},setup(o){const n=o,p=F(n.htmlSource||n.event.payload.html),_=k(()=>[{title:"From",address:n.event.payload.from},{title:"To",address:n.event.payload.to},{title:"CC",address:n.event.payload.cc},{title:"BCC",address:n.event.payload.bcc},{title:"Reply to",address:n.event.payload.reply_to}]),i=k(()=>{var l,$;return((l=n.event.payload)==null?void 0:l.html)!==void 0&&(($=n.event.payload)==null?void 0:$.html)!==""}),h=k(()=>{var l,$;return((l=n.event.payload)==null?void 0:l.text)!==void 0&&(($=n.event.payload)==null?void 0:$.text)!==""}),g=k(()=>n.event.payload),R=k(()=>N(n.event.date).format("DD.MM.YYYY HH:mm:ss")),S=k(()=>Array.isArray(n.event.payload.attachments)?n.event.payload.attachments:Object.values(n.event.payload.attachments||{}));return(l,$)=>(a(),r("div",le,[t("main",de,[t("header",pe,[t("h2",re,c(g.value.subject),1),t("div",_e,[t("span",ie,c(R.value),1)])]),t("section",ce,[(a(!0),r(b,null,T(_.value,f=>(a(),r(b,null,[(a(!0),r(b,null,T(f.address,C=>(a(),r("div",{key:`${f.title}-${C.email}`,class:P(["smtp-page__sender-item",`smtp-page__sender-${f.title.toLowerCase()}`])},[t("div",me,c(f.title),1),t("div",ue,[C.name?(a(),r(b,{key:0},[v(c(C.name)+" ["+c(C.email)+"] ",1)],64)):(a(),r(b,{key:1},[v(c(C.email),1)],64))])],2))),128))],64))),256))]),t("section",ve,[s(e(W),{options:{useUrlFragment:!1}},{default:d(()=>[i.value?(a(),u(e(w),{key:0,id:"html-preview",name:"Preview",suffix:"<span class='smtp-page__body-tab-badge'>HTML</span>"},{default:d(()=>[s(e(te),{device:"tablet"},{default:d(()=>[t("div",{innerHTML:p.value},null,8,he)]),_:1})]),_:1})):m("",!0),i.value?(a(),u(e(w),{key:1,name:"HTML"},{default:d(()=>[s(e(B),{language:"html",class:"max-w-full",code:l.event.payload.html},null,8,["code"])]),_:1})):m("",!0),h.value?(a(),u(e(w),{key:2,name:"Text"},{default:d(()=>[s(e(B),{language:"html",class:"max-w-full",code:l.event.payload.text},null,8,["code"])]),_:1})):m("",!0),S.value.length?(a(),u(e(w),{key:3,name:"Attachments",suffix:`<span class='smtp-page__body-tab-badge'>${S.value.length}</span>`},{default:d(()=>[t("section",ge,[t("div",fe,[(a(!0),r(b,null,T(S.value,f=>(a(),u(e(J),{key:f.id,"event-id":l.event.id,event:l.event,attachment:f},null,8,["event-id","event","attachment"]))),128))])])]),_:1},8,["suffix"])):m("",!0),s(e(w),{name:"Raw"},{default:d(()=>[s(e(B),{language:"html",code:l.event.payload.raw},null,8,["code"])]),_:1}),s(e(w),{name:"Tech Info"},{default:d(()=>[t("section",null,[ye,s(e(G),null,{default:d(()=>[s(e(y),{title:"Id"},{default:d(()=>[v(c(l.event.payload.id),1)]),_:1}),s(e(y),{title:"Subject"},{default:d(()=>[v(c(l.event.payload.subject),1)]),_:1}),s(e(y),{title:"From"},{default:d(()=>[s(e(I),{addresses:l.event.payload.from},null,8,["addresses"])]),_:1}),s(e(y),{title:"To"},{default:d(()=>[s(e(I),{addresses:l.event.payload.to},null,8,["addresses"])]),_:1}),l.event.payload.cc.length?(a(),u(e(y),{key:0,title:"Cc"},{default:d(()=>[s(e(I),{addresses:l.event.payload.cc},null,8,["addresses"])]),_:1})):m("",!0),l.event.payload.bcc.length?(a(),u(e(y),{key:1,title:"Bcc"},{default:d(()=>[s(e(I),{addresses:l.event.payload.bcc},null,8,["addresses"])]),_:1})):m("",!0),l.event.payload.reply_to.length?(a(),u(e(y),{key:2,title:"Reply to"},{default:d(()=>[s(e(I),{addresses:l.event.payload.reply_to},null,8,["addresses"])]),_:1})):m("",!0)]),_:1})])]),_:1})]),_:1})])])],512))}});const $e=E(be,[["__scopeId","data-v-65889f74"]]),{normalizeSmtpEvent:ke}=Q(),we=A({components:{SmtpPage:$e,PageHeader:K},async setup(){const o=Y(),n=O(),p=o.params.id;{const{$events:_}=U(),{data:i,pending:h}=await q(_.getUrl(p),{onResponse({response:g}){return g.data},onResponseError(){n.push("/404")},onRequestError(){n.push("/404")}},"$pRkmObBT4O");return{serverEvent:i,pending:h,eventId:p,html:`<iframe src="${z}/api/smtp/${p}/html"/>`,clearEvent:()=>_.removeById(p)}}},head(){return{title:`SMTP > ${this.eventId} | Buggregator`}},computed:{event(){return this.serverEvent?ke(this.serverEvent):null}},methods:{onDelete(){this.clearEvent(),this.$router.push("/")}}});const D=o=>(L("data-v-6e3bc245"),o=o(),M(),o),Se={class:"smtp-event"},Ce={key:0,class:"smtp-event__loading"},Ie=D(()=>t("div",null,null,-1)),Pe=D(()=>t("div",null,null,-1)),Te=D(()=>t("div",null,null,-1)),Ae=[Ie,Pe,Te],Re={class:"smtp-event__body"};function He(o,n,p,_,i,h){const g=j,R=x("PageHeader"),S=x("SmtpPage");return a(),r("main",Se,[s(R,{class:"smtp-event__head","button-title":"Delete event",onDelete:o.onDelete},{default:d(()=>[s(g,{to:"/"},{default:d(()=>[v("Home")]),_:1}),v(" /  "),s(g,{to:"/smtp"},{default:d(()=>[v("Smtp")]),_:1}),v(" /  "),s(g,{disabled:!0},{default:d(()=>[v(c(o.eventId),1)]),_:1})]),_:1},8,["onDelete"]),o.pending&&!o.event?(a(),r("div",Ce,Ae)):m("",!0),t("div",Re,[o.event?(a(),u(S,{key:0,event:o.event,"html-source":o.html},null,8,["event","html-source"])):m("",!0)])])}const Oe=E(we,[["render",He],["__scopeId","data-v-6e3bc245"]]);export{Oe as default};
