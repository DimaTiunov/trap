import{_ as A}from"./layout-sidebar.vue.180f31cf.js";import{d as R,c as v,o,a as p,b as u,t as c,e as r,f as h,w as l,F as k,r as q,g,u as _,h as i,p as O,i as j,_ as w,j as C,k as N,l as F,m as E}from"./entry.d63b9a39.js";import{u as T}from"./fetch.a2f95d2b.js";import{P as V}from"./page-header.1b1819e2.js";import{u as L}from"./use-http-dump.161252c9.js";import{T as H,a as P}from"./table-base.31e6f876.js";import{F as Q}from"./file-attachment.9a6d5475.js";import"./use-formats.c79ce0bd.js";const $=a=>(O("data-v-63ed9648"),a=a(),j(),a),U={ref:"main",class:"http-dump-page"},z={class:"http-dump-page__main"},G={class:"http-dump-page__title"},J={class:"http-dump-page__title-method"},K={class:"http-dump-page__title-uri"},M={key:0,class:"http-dump-page__section"},W=$(()=>u("h1",null,"Headers",-1)),X={key:1,class:"http-dump-page__section"},Y=$(()=>u("h1",null,"Cookie",-1)),Z={key:2,class:"http-dump-page__section"},x=$(()=>u("h1",null,"Query Parameters",-1)),ee={key:3,class:"http-dump-page__section"},te=$(()=>u("h1",null,"POST Data",-1)),se={key:4,class:"http-dump-page__section"},ne={class:"http-dump-page__attachments"},oe={key:5,class:"http-dump-page__section"},ae=$(()=>u("h1",null,"Request Body",-1)),ue={class:"http-dump-page__section-body"},de=R({__name:"http-dump-page",props:{event:{}},setup(a){const d=a,y=v(()=>{var e,n;return decodeURI((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.uri)}),f=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.post)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.post).length>0}),b=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.query)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.query).length>0}),D=v(()=>{var e,n;return Object.keys(((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.headers)||{}).length>0}),m=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.cookies)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.cookies).length>0}),B=v(()=>{var e,n,t;return((t=(n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.body)==null?void 0:t.length)>0}),I=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.files)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.files).length>0});return(e,n)=>(o(),p("div",U,[u("main",z,[u("h2",G,[u("span",J,c(e.event.payload.request.method),1),r(": "),u("span",K,"/"+c(y.value),1)]),D.value?(o(),p("section",M,[W,h(_(P),null,{default:l(()=>[(o(!0),p(k,null,q(e.event.payload.request.headers,(t,s)=>(o(),g(_(H),{key:s,title:String(s)},{default:l(()=>[r(c(t[0]||t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),m.value?(o(),p("section",X,[Y,h(_(P),null,{default:l(()=>[(o(!0),p(k,null,q(e.event.payload.request.cookies,(t,s)=>(o(),g(_(H),{key:s,title:String(s)},{default:l(()=>[r(c(t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),b.value?(o(),p("section",Z,[x,h(_(P),null,{default:l(()=>[(o(!0),p(k,null,q(e.event.payload.request.query,(t,s)=>(o(),g(_(H),{key:s,title:String(s)},{default:l(()=>[r(c(t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),f.value?(o(),p("section",ee,[te,h(_(P),null,{default:l(()=>[(o(!0),p(k,null,q(e.event.payload.request.post,(t,s)=>(o(),g(_(H),{key:s,title:String(s)},{default:l(()=>[r(c(t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),I.value?(o(),p("section",se,[u("h1",null,"Attachments ("+c(e.event.payload.request.files.length)+")",1),u("div",ne,[(o(!0),p(k,null,q(e.event.payload.request.files,t=>(o(),g(_(Q),{key:t.id,"event-id":e.event.id,attachment:t},null,8,["event-id","attachment"]))),128))])])):i("",!0),B.value?(o(),p("section",oe,[ae,u("code",ue,c(e.event.payload.request.body),1)])):i("",!0)])],512))}});const pe=w(de,[["__scopeId","data-v-63ed9648"]]),{normalizeHttpDumpEvent:le}=L(),re=R({components:{HttpDumpPage:pe,PageHeader:V},async setup(){const a=C(),d=N(),y=a.params.id;{const{$events:f}=F(),{data:b,pending:D}=await T(f.getUrl(y),{onResponse({response:m}){return m.data},onResponseError(){d.push("/404")},onRequestError(){d.push("/404")}},"$49gnpqdOen");return{serverEvent:b,pending:D,eventId:y,clearEvent:()=>f.removeById(y)}}},head(){return{title:`Http dumps > ${this.eventId} | Buggregator`}},computed:{event(){return this.serverEvent?le(this.serverEvent):null}},methods:{onDelete(){this.clearEvent(),this.$router.push("/")}}});const S=a=>(O("data-v-2f4992a2"),a=a(),j(),a),_e={class:"http-dumps-event"},ce={key:0,class:"http-dumps-event__loading"},ie=S(()=>u("div",null,null,-1)),he=S(()=>u("div",null,null,-1)),me=S(()=>u("div",null,null,-1)),ve=[ie,he,me],ye={class:"http-dumps-event__body"};function ge(a,d,y,f,b,D){const m=A,B=E("PageHeader"),I=E("HttpDumpPage");return o(),p("main",_e,[h(B,{class:"http-dumps-event__head","button-title":"Delete event",onDelete:a.onDelete},{default:l(()=>[h(m,{to:"/"},{default:l(()=>[r("Home")]),_:1}),r(" / "),h(m,{to:"/http-dumps"},{default:l(()=>[r("Http dumps")]),_:1}),r(" / "),h(m,{disabled:!0},{default:l(()=>[r(c(a.event.id),1)]),_:1})]),_:1},8,["onDelete"]),a.pending&&!a.event?(o(),p("div",ce,ve)):i("",!0),u("div",ye,[a.event?(o(),g(I,{key:0,event:a.event},null,8,["event"])):i("",!0)])])}const Be=w(re,[["render",ge],["__scopeId","data-v-2f4992a2"]]);export{Be as default};
