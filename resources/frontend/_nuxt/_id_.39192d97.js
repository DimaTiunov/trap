import{_ as j}from"./layout-sidebar.vue.30b2544d.js";import{d as A,c as v,o,a as p,b as u,t as c,e as r,f as h,w as l,F as q,r as b,g,u as _,h as i,p as R,i as O,_ as T,j as w,k as C,l as N,m as S}from"./entry.8cc9a0a4.js";import{u as F}from"./fetch.18605a33.js";import{P as V}from"./page-header.301ae07f.js";import{u as L}from"./use-http-dump.8e63886f.js";import"./file-attachment.vue.44781509.js";import{u as Q}from"./use-events.46f9c63f.js";import{T as P,a as B}from"./table-base.f52003cb.js";import{F as U}from"./file-attachment.1b258e0a.js";import"./use-formats.c79ce0bd.js";const $=a=>(R("data-v-63ed9648"),a=a(),O(),a),z={ref:"main",class:"http-dump-page"},X={class:"http-dump-page__main"},G={class:"http-dump-page__title"},J={class:"http-dump-page__title-method"},K={class:"http-dump-page__title-uri"},M={key:0,class:"http-dump-page__section"},W=$(()=>u("h1",null,"Headers",-1)),Y={key:1,class:"http-dump-page__section"},Z=$(()=>u("h1",null,"Cookie",-1)),x={key:2,class:"http-dump-page__section"},ee=$(()=>u("h1",null,"Query Parameters",-1)),te={key:3,class:"http-dump-page__section"},se=$(()=>u("h1",null,"POST Data",-1)),ne={key:4,class:"http-dump-page__section"},oe={class:"http-dump-page__attachments"},ae={key:5,class:"http-dump-page__section"},ue=$(()=>u("h1",null,"Request Body",-1)),de={class:"http-dump-page__section-body"},pe=A({__name:"http-dump-page",props:{event:{}},setup(a){const d=a,D=v(()=>{var e,n;return decodeURI((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.uri)}),y=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.post)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.post).length>0}),f=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.query)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.query).length>0}),H=v(()=>{var e,n;return Object.keys(((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.headers)||{}).length>0}),m=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.cookies)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.cookies).length>0}),k=v(()=>{var e,n,t;return((t=(n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.body)==null?void 0:t.length)>0}),E=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.files)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.files).length>0});return(e,n)=>(o(),p("div",z,[u("main",X,[u("h2",G,[u("span",J,c(e.event.payload.request.method),1),r(": "),u("span",K,"/"+c(D.value),1)]),H.value?(o(),p("section",M,[W,h(_(B),null,{default:l(()=>[(o(!0),p(q,null,b(e.event.payload.request.headers,(t,s)=>(o(),g(_(P),{key:s,title:String(s)},{default:l(()=>[r(c(t[0]||t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),m.value?(o(),p("section",Y,[Z,h(_(B),null,{default:l(()=>[(o(!0),p(q,null,b(e.event.payload.request.cookies,(t,s)=>(o(),g(_(P),{key:s,title:String(s)},{default:l(()=>[r(c(t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),f.value?(o(),p("section",x,[ee,h(_(B),null,{default:l(()=>[(o(!0),p(q,null,b(e.event.payload.request.query,(t,s)=>(o(),g(_(P),{key:s,title:String(s)},{default:l(()=>[r(c(t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),y.value?(o(),p("section",te,[se,h(_(B),null,{default:l(()=>[(o(!0),p(q,null,b(e.event.payload.request.post,(t,s)=>(o(),g(_(P),{key:s,title:String(s)},{default:l(()=>[r(c(t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),E.value?(o(),p("section",ne,[u("h1",null,"Attachments ("+c(e.event.payload.request.files.length)+")",1),u("div",oe,[(o(!0),p(q,null,b(e.event.payload.request.files,t=>(o(),g(_(U),{key:t.id,"event-id":e.event.id,attachment:t},null,8,["event-id","attachment"]))),128))])])):i("",!0),k.value?(o(),p("section",ae,[ue,u("code",de,c(e.event.payload.request.body),1)])):i("",!0)])],512))}});const le=T(pe,[["__scopeId","data-v-63ed9648"]]),{normalizeHttpDumpEvent:re}=L(),_e=A({components:{HttpDumpPage:le,PageHeader:V},async setup(){const a=w(),d=C(),D=N(),y=a.params.id,{events:f}=Q(),{data:H,pending:m}=await F(f.getUrl(y),{headers:{"X-Auth-Token":D.$authToken.token},onResponse({response:k}){return k.data},onResponseError(){d.push("/404")},onRequestError(){d.push("/404")}},"$49gnpqdOen");return{serverEvent:H,pending:m,eventId:y,clearEvent:()=>f.removeById(y)}},head(){return{title:`Http dumps > ${this.eventId} | Buggregator`}},computed:{event(){return this.serverEvent?re(this.serverEvent):null}},methods:{onDelete(){this.clearEvent(),this.$router.push("/")}}});const I=a=>(R("data-v-5364ab83"),a=a(),O(),a),ce={class:"http-dumps-event"},ie={key:0,class:"http-dumps-event__loading"},he=I(()=>u("div",null,null,-1)),me=I(()=>u("div",null,null,-1)),ve=I(()=>u("div",null,null,-1)),ye=[he,me,ve],ge={class:"http-dumps-event__body"};function fe(a,d,D,y,f,H){const m=j,k=S("PageHeader"),E=S("HttpDumpPage");return o(),p("main",ce,[h(k,{class:"http-dumps-event__head","button-title":"Delete event",onDelete:a.onDelete},{default:l(()=>[h(m,{to:"/"},{default:l(()=>[r("Home")]),_:1}),r("Â / "),h(m,{to:"/http-dumps"},{default:l(()=>[r("Http dumps")]),_:1}),r("Â / "),h(m,{disabled:!0},{default:l(()=>[r(c(a.event.id),1)]),_:1})]),_:1},8,["onDelete"]),a.pending&&!a.event?(o(),p("div",ie,ye)):i("",!0),u("div",ge,[a.event?(o(),g(E,{key:0,event:a.event},null,8,["event"])):i("",!0)])])}const Se=T(_e,[["render",fe],["__scopeId","data-v-5364ab83"]]);export{Se as default};
